# @Async注解失效

---

## 1. 同一个类

@Async标注的方法与调用方法处于同一个类，将导致@Async注解没有生效。

@Async、@Transaction等注解是基于动态代理实现的：Spring 扫描 Bean 的时候扫描方法上是否带有@Transaction、@Async，如果有，Spring 会为这个 Bean 动态生成一个子类（即代理类，proxy），并创建代理类的 Bean，代理类在执行相关方法前会开启事务、异步执行，之后被代理类相关方法的调用实际交给代理类。

如果相关方法与调用方法处于同一个类，相关方法的调用将直接交给原来的那个Bean，而不是动态创建的代理Bean，因此事务、异步就不会生效。